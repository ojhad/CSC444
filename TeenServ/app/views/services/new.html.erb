<h1>Add service</h1>

<%= form_for :service, :url => user_services_path(@user.id) do |f| %>

	<%= f.hidden_field :user_id , :value=>@user.id %>
	<div>
    	<%= f.label :service_title, "Title"%>
    	<%= f.select :service_title, Service::SERVICE_TYPES, {}, :id => "main_category_id"%>
    </div>

    <div id = "other-task-id" style = "display:none;">
    	<input id = "other_category_id" type = "text" >
    </div>

    <div>
    	<%= f.label :charge_per_hour, "Charge per hour in dollars"%>
    	<%= f.text_field :charge_per_hour %> 
    </div>

    <%= f.submit 'Add', :id => "submit_id", :value => nil %>
<% end %>

<script type="text/javascript">
	let main_category_selection = document.getElementById("main_category_id")
	let other_category_selection = document.getElementById("other_category_id")
	let submit = document.getElementById("submit_id")

	main_category_selection.onchange = () => {
		let selectedOption = main_category_selection.options[main_category_selection.selectedIndex].text

		let hiddenTaskField = document.getElementById("other-task-id");
		hiddenTaskField.style.display = (selectedOption == "Other") ? "block" : "none";
   	}

   	submit.onclick = () => {		
		let selectedOption = main_category_selection.options[main_category_selection.selectedIndex].text

		if (selectedOption == "Other") { 
			main_category_selection.options[main_category_selection.selectedIndex].value = other_category_selection.value;	
		}
   	}
</script>